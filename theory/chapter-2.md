<div align="center">

# Глава 2: Константы и переменные

</div>

<br />

<div align="center">

## Значения и литералы

</div>

**Значение (value)** — это какой-то фрагмент информации.

Значения делятся на два типа:
1. Фиксированные значения (литералы)
2. Изменяемые значения (переменные)

**Пример 1.1.** Примеры литералов.
```js
10;                // литерал числа
'Hello';           // литерал строки
true;              // литерал логического типа
[1, 2, 3];         // литерал массива
{ name: 'John' };  // литерал объекта
```

Фиксированные значения имеют всегда одно и то же значение:
- число `10` — это всегда число `10`, где бы в коде мы его не написали;
- массив `[1, 2]` — это всегда именно массив `[1, 2]`;
- и так далее.

<br />
<br />

<div align="center">

## Константы

</div>

**Константа (constant)** — это неизменяемое значение, которое хранится в области памяти.

Под памятью подразумевается оперативная память, жесткий диск или регистры компьютера. На то, где именно хранится константа, мы повлиять никак не можем, это задача компьютера.

Память можно представить как область состоящую из множества ячеек. Каждая ячейка обладает уникальным именем и может хранить внутри себя информацию.

**Пример 2.1.** Создание константы.
```js
const name = 'John';
```

Здесь:
- `const` — ключевое слово, которое означает создание новой константы;
- `name` — имя константы. Имя может быть любым;
- символ `=` — оператор присваивания, записывает в левую часть результат выражения правой части.

Такой записью мы говорим компьютеру, чтобы он пошел в память, создал там ячейку с именем `name` и поместил в нее значение `John`.

И теперь всегда, когда мы будем использовать название нашей константы, компьютер будет идти в память, искать ячейку с таким именем и отдавать её значение.

**Пример 2.2.** Вывод в консоль констант.
```js
const name = 'John';
console.log(name);
// John

const age = 25;
console.log(age);
// 25
```



<br />

<div align="center">

### Зачем нужны константы

</div>

Зачем нужны константы, если мы можем использовать обычные значения?

Во-первых, с помощью констант, значениям можно давать понятные человеку названия. Посмотрите на следующий пример.

**Пример 2.3.** Вывод литералов числа в консоль.
```js
console.log(20);   // 20
console.log(100);  // 100
console.log(10);   // 10
```

По примеру выше непонятно:
- что такое 20? Это количество попугаев в зоопарке? Или это количество страниц в каталоге?
- что такое 100?
- а что такое 10?

Но если мы каждое число запишем в константу и дадим имя, нам будет понятно что это за числа.

**Пример 2.4.** Создание и вывод констант в консоль.
```js
const countOfMovies = 20;
const numberOfUsers = 100;
const rating = 10;

console.log(countOfMovies);  // 20
console.log(numberOfUsers);  // 100
console.log(rating);         // 10
```

Теперь мы понимаем, что:
- `countOfMovies` — это количество фильмов на сайте;
- `numberOfUsers` — это количество пользователей на сайте;
- `rating` — рейтинг фильма.

<br />

Во-вторых, константы позволяют переиспользовать одно и то же значение множества раз.

**Пример 2.5.** Переиспользование констант.
```js
const year = 1990;
console.log(year);  // 1990

// ...какой-то код...

console.log(year);  // 1990

// ...какой-то код...

console.log(year);  // 1990
```

Переиспользование — важная часть программирования.

Представьте, что на своем сайте вы используете строку `'Год выхода фильма Властелин Колец: 1999'` более пятидесяти раз. И в один момент поняли, что совершили ошибку, ведь Властелин колец вышел в 2001-ом году. Всё что вам теперь остается делать — искать все пятьдесят строк и исправлять текст.

Но если бы вы изначально поместили эту строку в константу, то вам достаточно было бы сделать исправление в одном месте, и во всех пятидесяти местах исправления бы применились автоматически.



<br />

<div align="center">

### Нюансы констант

</div>

Имя константы должно быть уникальным. Нельзя создавать несколько констант с одинаковым именем.

**Пример 2.6.** Ошибка! Константы должны обладать уникальными именами.
```js
const year = 1950;
const year = 1992;  // SyntaxError: Identifier 'year' has already been declared
```

<br />

Константам запрещено переопределять значение.

**Пример 2.7.** Ошибка! Константы нельзя переопределять.
```js
const planet = 'Earth';
planet = 'Mars';  // TypeError: Assignment to constant variable.
```

<br />

Нельзя обращаться к константам до их инициализации.

**Пример 2.8.** Ошибка! Константа не найдена.
```js
// На момент вызова console.log, константы name еще не существует
console.log(name);  // ReferenceError: name is not defined
const name = 'John';
```

<br />

В качестве значения констант можно использовать другие константы (и переменные).

**Пример 2.9.** Задаем константу, в качестве значения константы.
```js
const a = 5;
const b = a;
console.log(a);  // 5
console.log(b);  // 5

const login = 'admin';
const userName = login;
console.log(login);     // 'admin'
console.log(userName);  // 'admin'
```





<br />
<br />

<div align="center">

## Переменные

</div>

**Переменная (variable)** — это изменяемое значение, которое хранится в области памяти.

**Пример 3.1.** Вывод переменной в консоль.
```js
let number = 100;
console.log(number);
```

Здесь:
- `let` — это ключевое слово, которое означает что мы создаем новую переменную;
- `number` — это название переменной;
- оператор присваивания `=` — записывает в левую часть результат выражения правой части.

<br />

Переменные могут менять содержащееся в них значение.

**Пример 3.2.** Переопределение значения переменной.
```js
let age = 24;
console.log(age);  // 24

age = 25;
console.log(age);  // 25

age = 26;
console.log(age);  // 26
```

<br />

**Обратите внимание!** При изменении уже существующей переменной, не нужно заново прописывать ключевое слово `let`.

`let` — создает новую переменную. Однако создавать несколько переменных с одинаковым именем нельзя.

**Пример 3.3.** Ошибка! Создавать несколько переменных с одинаковым именем нельзя.
```js
let name = 'John';
let name = 'Steve';  // SyntaxError: Identifier 'name' has already been declared
```

<br />

Обращаться к переменным до их инициализации нельзя.

**Пример 3.4.** Ошибка! Переменная не найдена.
```js
console.log(bool);
let bool = true;
```

<br />

В качестве значения переменной можно использовать другие переменные (и константы).

**Пример 3.5.** Задаем значение для переменной в виде другой переменной.
```js
let a = 'awesome';
let b = a;
console.log(a);  // awesome
console.log(b);  // awesome

let number1 = 10;
let number2 = number1;
let number3 = number2;
console.log(number1);  // 10
console.log(number2);  // 10
console.log(number3);  // 10
```



<br />

<div align="center">

### Зачем нужны переменные

</div>

Константы используются тогда, когда мы работаем с неизменяемыми значениями. Переменные же используются со значениями, которые в процессе выполнения программы могут быть изменены.



<br />
<br />

<div align="center">

## Именование констант и переменных

</div>

В именах констант и переменных разрешены буквы, символы нижнего подчеркивания, и цифры. Единственное исключение — начинать имя с цифры нельзя.

**Пример 4.1.** Допустимые имена переменных.
```js
let name = 'Steve';
let user50 = 'ralph';
let _config = { params: true };
```

<br />

**Пример 4.2.** Недопустимые имена переменных.
```js
let 10age = 'Пушка';        // начинать имя с цифры нельзя
let my-name = 'Андрей';     // использовать дефисы в имени нельзя
let what a font = 'Arial';  // использовать пробелы в имени нельзя
```

<br />

Если имя переменной состоит из нескольких слов, то допустимы два варианта:
- отделение каждого слова нижним подчеркиванием;
- верблюжья нотация — когда каждое новое слово пишется с заглавной буквы.

Какую из этих двух видов записей выбрать? В сообществе JavaScript принято использовать верблюжью нотацию, поэтому советуем придерживаться её.

**Пример 4.3.** Правильное задание имени из нескольких слов.
```js
let myName = 'Sam';
let my_name = 'Sam';
```

<br />

Переменную можно именовать как со строчной, так и с прописной буквы. Между JavaScript-разработчиками существует соглашение:
- именовать классы и функции-конструкторы с прописной буквы;
- во всех остальных случаях начинать имя со строчной буквы.

> Что такое класс и функция-конструктор мы расскажем в следующих главах.

**Пример 4.4.** Именование с прописной и строчной буквы.
```js
let otherVariable = 'over';
let MyClass = 'for class';
```



<br />
<br />

<div align="center">

## Выражение

</div>

**Выражение (expression)** — это фрагмент кода, который в ходе своего выполнения приводит к вычислению и возврату некоторого значения.

**Пример 5.1.** Несколько примеров выражений.
```js
10;                 // выражение литерала числа
13 + 7;             // выражение суммы чисел
5 > 3;              // выражение сравнения чисел
'Hello';            // выражение литерала строки
'Hello' + 'world';  // выражение конкатенации строк
true;               // выражение литерала логического типа

const a = 5;
const b = 6;
a;      // выражение константы a
a + b;  // выражение суммы констант a и b
```

<br />

В примере ниже, вся строка является инструкцией, а часть кода, которая находится после оператора присваивания — выражение.

**Пример 5.2.** Инструкция, в правой части которой содержится выражение.
```js
const sum = 10 + 5;
```

Где:
- `const sum = 10 + 5;` — инструкция;
- `10 + 5` — выражение.



<br />
<br />

<div align="center">

## Оператор присваивания

</div>

**Оператор присваивания `=`** — записывает в переменную значение правого операнда.

**Пример 6.1.** Использование оператора присваивания.
```js
// Записываем в переменную pi значение 3.14
let pi = 3.14;

// Записываем в переменную name значение 'Рома'
let name = 'Рома';

// Записываем в переменную numbers значение [1, 2, 3, 4]
let numbers = [1, 2, 3, 4];
```

<br />

**Присваивание по цепочке (chaining)** — записывает нескольким переменным значение правого операнда.

**Пример 6.2.** Присваивание всем переменным одного значения.
```js
let a = b = c = 10;

console.log(a);  // 10
console.log(b);  // 10
console.log(c);  // 10
```

<br />

Правый операнд оператора присваивания — любое выражение. Это означает, что в правой части можно проводить любые вычисления, и даже запускать функции.

Когда JavaScript встречает выражение — оно выполняется в первую очередь, и только затем результат этого выражения будет записан в переменную. 

**Пример 6.3.** Пример выражения в правом операнде.
```js
// Сперва происходит конкатенация строк, и только потом
// объединенная строка записывается в переменную address
const address = 'Lenina' + ' 15';
console.log(address);
// Lenina 15
```

<br />

**Пример 6.4.** Пример выражения суммы чисел.
```js
const a = 10;
const b = 20;

// Сперва вычисляется выражение a + b,
// затем результат выражения записывается в переменную result
const result = a + b;

console.log(result);  // 30
```



<br />

<div align="center">

### Сокращенные операторы присваивания

</div>

Некоторые выражения настолько распространены, что для них были созданы специальные сокращенные конструкции.

Одна из самых частых конструкций — увеличение значения переменной.

**Пример 6.5.** Увеличение значения переменной на 5.
```js
let count = 0;

count = count + 5;
console.log(count);  // 5

count = count + 5;
console.log(count);  // 10
```

<br />

**Пример 6.6.** Сокращенный вариант увеличения значения переменной на 5.
```js
let count = 0;

count += 5;
console.log(count);  // 5

count += 5;
console.log(count);  // 10
```

<br />

Аналогично, в язык добавлены сокращенные варианты для вычитания, перемножения, деления, взятия остатка от деления.

**Пример 6.7.** Сокращенные операторы.
```js
let a = b = c = d = e = 10;

a += 5;
b -= 5;
c *= 5;
d /= 5;
e %= 5;

console.log(a);  // 15
console.log(b);  // 5
console.log(c);  // 50
console.log(d);  // 2
console.log(e);  // 0
```


<br />
<br />

<div align="center">

## Работа с объектами и массивами

</div>

В переменных (и константах) можно хранить любые типы данных, включая объекты и массивы.

**Пример 7.1.** Хранение объектов и массивов в переменных.
```js
let object = { name: 'John' };
let array = [0, 1, 2, 3];

console.log(object);  // { name: 'John' }
console.log(array);   // [0, 1, 2, 3]
```

<br />

С помощью оператора доступа (через точку), мы можем менять значение свойств объекта.

**Пример 7.2.** Изменение значения свойства объекта.
```js
let object = {
  count: 0,
  title: 'counter'
};

object.count = 1;
console.log(object);
// {
//   count: 1
//   title: 'counter',
// }

object.title = 'numbers';
console.log(object);
// {
//   count: 1
//   title: 'numbers',
// }
```

<br />

Аналогично, можно изменить значение свойства объекта с помощью оператора доступа через квадратные скобки. Обращаем внимание, что название свойства в квадратных скобках должно быть в виде строки.

**Пример 7.3.** Альтернативный способ изменения значения свойства объекта.
```js
let object = {
  book: 'Creative',
  year: 2000
};

object['year'] = 2001;
console.log(object);
// {
//   booke: 'Creative',
//   year: 2001
// }

object['book'] = 'Impression';
console.log(object);
// {
//   booke: 'Impression',
//   year: 2001
// }
```

<br />

Для изменения значения элемента массива, можно воспользоваться оператором доступа через квадратные скобки.

**Пример 7.4.** Изменение значения элемента массива.
```js
let array = ['one', 'two', 'three'];

array[0] = 'eleven';
console.log(array);
// ['eleven', 'two', 'three']

array[1] = 'twelve';
console.log(array);
// ['eleven', 'twelve', 'three']
```

<br />

Работа с объектами и массивами гораздо глубже, чем только изменение их значений. Об остальных возможностях и инструментах мы поговорим в отдельных главах.

На данном этапе мы хотим, чтобы вы научились менять уже существующие элементы массивов и менять значения свойств объектов.


<br />
<br />

<div align="center">

## Примитивы и ссылочные типы в переменных

</div>


<div align="center">

### Константы при работе с объектами и массивами

</div>

Как мы знаем, значение константы менять нельзя.

**Пример 8.1.** Ошибка! Значение константы было изменено.
```js
const planet = 'Earth';
planet = 'Mars';  // TypeError: Assignment to constant variable.
```

<br />

Но если попробовать сделать то же самое с массивом, то всё пройдет успешно и без ошибок.

**Пример 8.2.** Изменение элемента массива который хранится в константе.
````js
const numbers = [1, 3, 5];
numbers[0] = 99;

console.log(numbers);  // [99, 3, 5]
````

<br />

И если попробовать поменять значение свойства объекта содержащегося в константе, то и здесь всё пройдет успешно.

**Пример 8.3.** Изменение значения свойства объекта содержащегося в константе.
```js
const person = { name: 'John' };
person.name = 'Steve';

console.log(person);  // { name: 'Steve' }
```

<br />

Почему так?

Это происходит потому, что все типы данных делятся на две категории: примитивы и ссылочные типы:
- **Примитивы (primitives)** — это данные, которые не являются объектом и не имеют методов: числа, большие числа, строки, логические типы, undefined, символы и null;
- **Ссылочные типы (reference types)** — это все объектные типы данных: объекты, массивы, функции, Map, Set.

Примитивы и ссылочные типы имеют **очень важное** отличие:
- примитивы хранят в переменных значение;
- ссылочные типы хранят в переменных не значение, а ссылку на значение.



<br />

<div align="center">

### Пример изменения значения примитивов

</div>

Допустим, у нас есть следующий код.

**Пример 8.4.** Исходный код.
```js
let name = 'John';
let name2 = name;
```

<br />

Представьте, что таблица ниже — это память. При запуске кода память будет заполнена следующим образом.

**Таблица 1.1.** Примитивы в памяти.

Имя переменной | Значение в памяти | Пояснение
---            | ---    | ---
name           | `John` | Это значение было установлено напрямую
name2          | `John` | Это значение было скопировано у переменной `name`

<br />

Переменные `name` и `name2` никак не зависят друг от друга. Если мы поменяем значение в одной из них, значение второй не изменится.

**Пример 8.5.** Изменение переменной.
```js
let name = 'John';
let name2 = name;

name = 'Steve';
```

**Таблица 1.2.** Примитивы в памяти после изменения переменной.

Имя переменной | Значение в памяти |
---            | ---
name           | `Steve`
name2          | `John`

<br />

<div align="center">

### Пример изменения значения ссылочных типов

</div>

Когда в переменную попадает ссылочный тип (например, объект), то:
1. В памяти создается новый объект.
2. Созданному объекту присваивается случайное имя. Это имя является ссылкой на этот объект.
3. В переменную записывается ссылка на объект.

**Пример 8.6.** Создание переменных содержащих объект.
```js
let personA = { name: 'John' };
let personB = personA;
```

**Таблица 1.3.** Тем временем в памяти.

Имя переменной | Значение в памяти | Пояснение
---            | --- | ---
0x01           | `{ name: 'John' }` | Когда в памяти создается объект, ему автоматически назначается случайное имя (ссылка).
personA        | 0x01 | Далее уже эта ссылка попадает в переменную, а не само значение.
personB        | 0x01 | И когда мы присваиваем переменной другой ссылочный тип, мы копируем не значение, а ссылку на это значение.

<br />

То есть в переменные `personA` и `personB` был записан не объект напрямую, а ссылка на него. Это означает, что `personA` и `personB` ссылаются на один и тот же объект. И при внесении изменений в одной из переменных — будет автоматически изменена и другая.

**Пример 8.7.** Изменение объекта.
```js
let personA = { name: 'John' };
let personB = personA;

personA.name = 'Steve';
```

**Таблица 1.4.** Память, после изменения объекта.

Имя переменной | Значение в памяти | Пояснение
---            | --- | ---
0x01           | `{ name: 'Steve' }` | Инструкция `personA.name = 'Steve';` изменила объект по ссылке `0x01`.
personA        | 0x01 | `personA` получил изменения по ссылке `0x01`.
personB        | 0x01 | `personB` получил изменения по ссылке `0x01`.

<br />

При изменении массивов происходит точно такая же история.

**Пример 8.8.** Изменение массивов.
```js
const arrA = [0, 1, 2];
const arrB = arrA;

arrB[0] = 99;

console.log(arrA);  // [99, 1, 2]
console.log(arrB);  // [99, 1, 2]
```


<br />
<br />

<div align="center">

## Когда использовать константы, а когда переменные

</div>

Константы стоит использовать в ситуациях, когда изначальное значение не должно быть изменено. Таким образом мы держим себя в безопасности от незапланированного изменения значения.

Также, в подавляющем большинстве случаев все ссылочные типы помещаются в константу.

**Пример 9.1.** Примеры использования констант.
```js
// Число Пи всегда одно и то же
const PI = 3.14;

// Предполагается, что login не будет изменен
const login = 'admin';

// Ссылочные типы практически всегда помещаются в константы
const paths = ['home', 'about', 'contacts'];
const user = { login: 'samurai' }
```

<br />

Переменные используются во всех случаях, когда значение меняется в процессе вычисления выражений.

**Пример 9.2.** Пример использования переменных.
```js
const num1 = 1;
const num2 = 2;
const num3 = 3;

// Значение result меняется
let result = num1 + num2;
result = num2 + num3;
result = result + num1;
```

<br />

Если вы с ходу не можете предположить будет ли меняться значение, то есть одно простое правило: всегда используйте ключевое слово `const`, а когда поймете что значение может быть изменено — просто поменяйте `const` на `let`.





<br />
<br />

<div align="center">

## Ключевое слово `var`

</div>

В недалеком прошлом, ключевых слов `const` и `let` в языке JavaScript не существовало. За создание переменных отвечало только одно ключевое слово — `var`.

**Пример 10.1.** Использование ключевого слова `var`.
```js
var number = 5;
var text = 'Hello';

console.log(number);  // 5
console.log(text);    // 'Hello'
```

<br />

Ключевое слово `var` похоже на `let`, и делает практически то же самое, за исключением одного нюанса — создание в разных типах областей видимости. Что такое область видимости мы рассмотрим позднее.

Про `var` следует знать только одно — это ключевое слово считается устаревшим и **его никогда не стоит использовать в своем коде**. Но так как "очень умные" ребята во время собеседований обожают спрашивать про различия `let` и `var`, то нам придется рассмотреть этот вопрос, но уже в другой главе.




<br />
<br />

<div align="center">

## Заключение

</div>

В текущей главе мы рассмотрели работу с константами и переменными. В следующий раз нас ожидают функции.

Но прежде всего, напоминаем:
1. Обязательно ответьте на все контрольные вопросы к главе.
2. Пройдите весь список тестов.
3. Прорешайте приложенные к главе задачи.

**И только затем двигайтесь дальше!**





<br />
<br />

<div align="center">

## Контрольные вопросы

</div>

1. Что такое значение?
2. Что такое константа?
3. Зачем нужны константы?
4. Можно ли создать несколько констант с одинаковым именем?
5. Что можно хранить в значении константы?
6. Можно ли обращаться к константам до их инициализации?
7. Что такое переменная?
8. Можно ли создать несколько переменных с одинаковым именем?
9. Можно ли обращаться к переменным до их инициализации?
10. Зачем нужны переменные?
11. Какие символы разрешены в именах констант и переменных?
12. Что такое верблюжья нотация?
13. Что такое выражение?
14. Как работает оператор присваивания?
15. Как работает присваивание по цепочке?
16. Перечислите сокращенные операторы присваивания.
17. Как изменить значение свойства объекта?
18. Как изменить значение элемента массива?
19. Что такое примитив?
20. Что такое ссылочный тип?
21. В чем отличие примитивов от ссылочных типов?
22. Как изменяются значения ссылочных типов?
23. Когда использовать константы, а когда переменные?
24. Что такое `var`?



<br />
<br />

<div align="center">

## Дополнительные материалы

</div>

- [Тесты для главы 2](/test/chapter-2.md)
